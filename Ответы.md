# Ответы на экзаменационные вопросы по курсу "*Теория Автоматов и Формальных Языков*"

**Учебный год**: 2019 – 2020

**Семестр**: 5

**Преподаватель**: Антик Михаил Ильич

## 1. Основные задачи процесса трансляции и их назначение

Трансляция состоит из двух основных фаз (процессов): **анализа** и **синтеза**.

В первой фазе анализируется синтаксис программы, результатом которого яв-
ляется преобразование исходного кода в промежуточный код. В фазе синтеза промежуточный код транслируется в код исполняемый целевой машиной.

## 2. Язык программирования как формальный язык

Текст программы, это формальный язык в виде последовательности сим-
волов. Символы берутся из конечного множества, называемого **словарём** (алфавитом) языка.

Программа состоит из частей (объектов), образованных последовательно-
стями символов, называемых **синтаксическими понятиями**, таких, как опера-
торы, выражения, описания,... Структура синтаксических понятий должна быть образована в соответствии с синтаксическими правилами и распознаётся
транслятором в соответствии с этими же правилами.

Текстам, полученным в соответствии с синтаксическими правилами, при-
даётся **семантика**, т.е. определённое понимание смысла этих текстов; семантика накладывает некоторые дополнительные ограничения на допустимые в языке тексты. Программа семантически трактуется как законченное предписа-
ние для выполнения некоторого вычислительного процесса.

> Тем самым *синтаксис* указывает правила написания (конструкции) объ-
> ектов языка, а *семантика* разъясняет использование этих объектов для реали-
> зации вычислений.

Набор синтаксических правил называют **грамматикой языка**. Синтаксические правила записываются на другом формальном языке. Язык, предназна-
ченный для описания другого языка, называется **метаязыком**.

## 3. Синтаксические правила в расширенной форме Бэкуса-Наура

Синтаксические правила в *БНрФ* выглядят следующим образом:

```
СинтаксическоеПонятие::=СинтаксическаяФормула.
           (Заголовок::=Тело)
```

В формуле одного *синтаксического понятия* используется другое *синтаксическое понятие*, которое в свою очередь определяется через *формулу*. Каждое *синтаксическое понятие* упомянутое в синтаксической формуле должно быть определено *синтаксическим правилом*. Таким образом множество *синтаксических правил* образует иерархическую структуру. Обычная практика использования замены (подстановки) в математике с тем, чтобы получить окончательное выражение (конструкцию объекта языка).

В окончательном (завершённом) варианте синтаксическая переменная
должна быть определена через некоторые *неделимые* (*атомарные*) элементы языка программирования их называют **терминалами**. На разных этапах трансляции *терминалами* являются различные элементы на начальном этапе это *литеры*, на следующем этапе трансляции это *лексемы*. *Терминалы* записываются точно также как в исходном тексте программы, но выделяются либо жирным
шрифтом, либо подчёркиванием, либо прямоугольным контуром, например:
**array** (<u>array</u>).

Синтаксические переменные называют − **нетерминалами**.

Структура правил в *БНрФ* следующая:

* *А::=ВС* означает что понятие А состоит из следующих друг за другом грамма-
  тических конструкций А и В, т.е. их **катенации**.

* *А::=В|С|D* означает, что А состоит **либо** из В, **либо** из С, **либо** из D (перечисле-
  ние альтернатив).

* *А::=(B|C|D)E* вместо *А::=BE|CE|DE*

* *А::=[В]* конструкция *В* **либо** присутствует **один раз**, **либо ни разу**

* *А::={В}* конструкция *А* может состоять из **любого числа (включая нуль)** кон-
  струкций *В* (**катенаций** конструкции *В*).

> Здесь символы «::=», «|», «()», «[]», «{}» являются **метасимволами** (т.к. принадлежат метаязыку).

## 4. Синтаксические диаграммы

Наряду с текстовыми способами описания синтаксиса языков используются и
графические метаязыки, среди которых наиболее широкую известность получил **язык диаграмм Вирта**, впервые примененный для описания языка *Паскаль*. Метасимволы заменены следующими графическими обозначениями (рис. 1.2):

- **терминалы** располагаются в окружностях или прямоугольниках со скруглен-
ным вертикальными сторонами;

- **нетерминалы** заносятся внутрь прямоугольников;
- каждый графический элемент, соответствующий терминалу или нетерминалу, имеет по одному входу и выходу, которые расположены на противоположных сторонах контура;

- каждому правилу соответствует своя графическая диаграмма, на которой тер-
миналы и нетерминалы соединяются посредством дуг;
- должна быть одна входная дуга (располагается обычно слева и сверху), зада-
ющая начало правила и помеченная именем определяемого нетерминала, и одна выходная, задающая его конец (обычно располагается справа и снизу).

![](Images/SyntaxDiagram.gif)

## 5. Основные определения формальных языков и грамматик (алфавит, слова, языки, грамматики, терминалы, нетерминалы, продукции, вывод,....)

* **Алфавитом** называется конечное непустое множество А={a~1~,...,a~n~}. Его элементы a~t~ называются **символами**.

* **Словом** (*цепочкой*, *строкой*, *кортежем*) в алфавите А называется конечная последовательность ã~t~=(a~t1~,...,a~tm~) элементов А (символов).

* Множество всех слов в алфавите А обозначается **А^*^**. Множество всех непустых слов в алфавите A обозначается **A^+^**

* Если L ⸦ A^*^, то L называется **языком** (*формальным языком*) над алфавитом A.

* **Грамматикой** (*формальной грамматикой*) называется
  четвёрка *G = (T, N, P, S)*, где T и N − алфавиты.

  T − конечный *терминальный алфавит*, его элементы называются *терминальными символами* или **терминалами**;

  N – конечный *нетерминальный алфавит*, его элементы называются *нетерминальными символами*, **нетерминалами** или *переменными*; T ∩ N = ∅;

  S – начальный символ, S ∈ N;
  P – *правила подстановки* или **продукции**, P ⸦ (T ∪ N)^+^× (T ∪ N)^*^, множество P конечно, пары (α, β) ∈ P записываются в виде α → β.

* Если ω~0~ ~G~⇒ ω~1~ ~G~⇒ ... ~G~⇒ ω~n~, где n > 0, то пишем ω~0~ ~G~⇒^*^ ω~n~.
  При этом последовательность слов ω~0~, ω~1~,..., ω~n~ называется **выводом** слова ω~n~
  из слова ω~0~ в грамматике G. Число n называется **длиной** (количеством шагов)
  этого вывода.

## 6. Входные и выходные данные, фазы лексического анализа

> **Лексический анализатор** — это модуль *транслятора*, **входом** которого служит цепочка символов, представляющих исходную программу, а **выходом** – последовательность токенов и таблиц (базы данных) с ними (токенами) связанные. Таблицы могут быть следующие: заранее составленные
> – таблица зарезервированных имён и таблица ограничителей, таблица имён,
> которая формируется в процессе анализа.

Фазы:

1. **Символы**, последовательность которых составляет исходную программу,
   считываются и **группируются в** отдельные лексические **элементы**. Каждой
   лексеме сопоставляется **пара**, которую называют токеном (**token**):

    `(тип_лексемы, ссылка_на_информацию_о_ней)`.
   
   Это одно или два машинных слова. Такое представление программы де-
   лает её более удобной для дальнейшей обработки на следующем этапе синтак-
   сического анализа.
   
2. **Удаление** из исходного представления программы **несущественные** для синтаксиса языка **элементы** исходного текста (пробелы, символы табуляции, комментарии и т.п.), тем самым уменьшая длину программы.

## 7. Конечные автоматы и языки ими распознаваемые

**Конечный автомат** − это пятёрка *H=(Q,T,Δ,S,F)*, где
T − конечный алфавит,
Q − конечное множество, элементы которого называются состояниями,

S − начальные состояния, S ⸦ Q,
F − заключительные или допускающие состояния, F ⸦ Q,
Δ − конечное множество отношений, Δ ⸦ Q×T^*^×Q, если (p,ã,q)∈Δ, то (p,ã,q)
называется переходом из p в q, слово ã − меткой этого перехода.

**Язык, распознаваемый конечным автоматом** *H*, − это язык
L(H), состоящий из меток всех успешных путей (то есть из всех допускаемых
данным автоматом слов). Будем также говорить, что автомат H распознаёт
язык L(H).

## 8. Эквивалентные представления автоматных языков формальной грамматикой

U → a, U → aU' (U → U'a), где U и U' – *нетерминальные символы*, a – *терминальный символ*. Языки такого вида (3 по Хомскому) называют **автоматными языками**.

Источник: [Теория формальных грамматик](http://portal.tpu.ru:7777/SHARED/t/TRACEY/Courses/theory/Tab_automata_textbooks/Lec_09.pdf)

## 9. Преобразование недетерминированных конечных автоматов в детерминированные

> *Конечный автомат* называется **конечным детерминированным автоматом** (*ДКА*), если для каждого состояния *q* и каждого символа *a* в алфавите меток существует в точности один переход (дуга в орграфе автомата), из *q* помеченный символом *a*, и кроме того, имеется только одна начальная вершина. В этом случае отношение Δ является функциональным отноше-
> нием *δ : Q×Т → Q (p = δ(q,t), p∈Q, q∈Q, t∈T)*. *Конечный автомат*, не облада-
> ющий такими свойствами однозначности, будем называть **недетерминированным** конечным автоматом (*НКА*).

**Алгоритм преобразования НКА в ДКА**. Будем называть состояния НКА
вершинами, состояния ДКА состояниями.

0. «Чистка» НКА (не обязательное действие, но сокращающее трудоёмкость алгоритма детерминизации). Из НКА удаляются:

   * петли без меток;
   * вершины, недостижимые из начальных вершин;
   * вершины, из которых недостижимы заключительные вершины.

1. Таблица НКА. В таблице должны быть следующие столбцы:

   * имя вершины;

   * индекс вершины;

   * индикатор (флаг) финальной вершины

   * остальные столбцы соответствуют всем символам входного алфавита плюс пустой символ.

    Первая строка таблицы соответствует единственной входной вершине.

    Если входных вершин было более одной, то это будет новая вершина, которая соединяется дугами без меток (пустой меткой) со всеми старыми входными вершинами. Остальные строки соответствуют всем вершинам НКА.

2. Нумерация дуг (переходов). Каждая помеченный переход получает
   уникальный номер, начиная с 2 и далее 3,4,...
   
3. Индексация вершин. Входная вершина получает индекс 1. Вершинам НКА присваивается индекс, состоящий из номеров всех входящих в эту вершину дуг. Индекс вершины, из которой выходит пустая дуга, приписывается к индексу вершины, в которую эта дуга входит.

4. Автоматная таблица. Заготавливается таблица (пустая), в которой должны быть следующие столбцы:

   * шифр состояния;

   * флаг финальных вер-
     шин;

   * остальные столбцы соответствуют всем символам входного алфавита.

5. Заполнение строки автоматной таблицы. Первой строке, соответствующей начальному состоянию автомата, присваивается шифр 1. Начиная с этой строки, используя таблицу источника, в столбцы, именованные входными символами, записываются номера дуг, имеющих метку, совпадающую с име-
   нем столбца и выходящих из всех вершин, в индексах которых содержится ка-
   кой-либо номер из шифра этого состояния (строки). Если таких дуг нет, то за-
   писывается номер 0. В строке с шифром 0 во всех столбцах содержатся нули. (Состоянию с шифром 0 соответствует “тупиковое” состояние.)

6. Порождение новых строк. После заполнения очередной строки в столб-
   цах, именованных входными символами, записаны шифры состояний. Если в строке появились новые шифры, не встречавшиеся ранее, то они порождают
   новые строки.

7. Финальным будет то состояние, в шифре которого есть номер, совпа-
   дающий с каким-либо номером из индексов финальных вершин НКА.

Пример:

![](Images/НКА_в_ДКА.png)

## 10. Минимизация детерминированных автоматов

> *Детерминированный конечный автомат*, эквивалентный заданному и име-
> ющий наименьшее возможное число состояний, называется **минимальным**.
>
> Минимизация автомата возможна, если в автомате есть состояния, которые могут быть объединены в одно состояние. Такие состояния называют эквива-
> лентными состояниями. Иначе говоря, автомат минимальный, если у него нет эквивалентных состояний.

Алгоритм:

1. Явно эквивалентные состояния заменяются одним состоянием.
2. Вычисление S~0~. Состояниям с одинаковыми флагами присваивается один
   и тот же суффикс. Автоматная таблица переписывается с записью суффиксов
   в строке состояний.
3. Вычисление S~i~. Состояниям с одинаковой комбинацией в строке выхода
   и суффиксов присваивается один и тот же может быть новый суффикс.
   Если количество различных суффиксов, т.е. классов эквивалентности неувеличилось или равно числу состояний, то вычисление классов эквивалент-
   ности закончено, иначе пункт (3).
4. За не более чем n-1 итерацию классы эквивалентности вычислены. Каж-
   дому классу эквивалентности в минимальном автомате сопоставляется одно состояние.

![](Images/Минимизация.png)

## 11. Варианты программной реализации фазы лексического анализа

## 12. Регулярные языки выражения и определения

## 13. Эквивалентность регулярных и автоматных языков

## 14. Иерархия грамматик Хомского

## 15. Контекстно-свободные грамматики

## 16. Входные и выходные данные фазы синтаксического разбора

## 17. LR – анализ синтаксических конструкций

## 18. LR – автоматы недетерминированные и детерминированные

## 19. LR – автоматы со стековой памятью при разборе КС – грамматических конструкций

## 20. Разбор неоднозначных КС – грамматик (LR(1) – анализ)

## 21. Синтаксически управляемая трансляция

## 22. Обратная польская запись как промежуточный язык трансляции

## 23. Обратная польская запись арифметических и логических выражений

## 24. Обратная польская запись условных операторов, выбора, циклов

## 25. Хранение многомерных массивов в памяти и обратная польская запись обращения к таким массивам